# This file contains all of the settings for TravisCI, which is the
# continuous integration system used with strax.  For more information,
# see: https://travis-ci.org

dist: trusty # Ubuntu distribution
language: python

# Caching the Python dependencies speeds up builds and lightens
# the load on TravisCI
cache: pip  

# Everything should work in userspace
sudo: false

matrix:
  - include:
    - python: "3.6"
      os: linux
    - python: "3.7-dev"
      os: linux
    - python: "3.8-dev"
      os: linux
    
    - python: "3.6"
      os: osx
    - python: "3.7-dev"
      os: osx
    - python: "3.8-dev"
      os: osx
  - allow_failures:  # Allow some to fail so we know when they do work!
    - python: "3.7-dev"
      os: linux
    - python: "3.8-dev"
      os: linux
    - python: "3.6"
      os: osx
    - python: "3.7-dev"
      os: osx
    - python: "3.8-dev"
      os: osx

install:
  - pip install -r requirements.txt
  - pip install coveralls
  - python setup.py install
  
script:
  - coverage run --source=strax setup.py test
  
after_success:
  - coveralls
